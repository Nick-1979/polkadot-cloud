import { Edit } from "../lib/Edit";
import { Note } from "../lib/Note";
import { Header } from "../lib/Header";
import { OverlayProvider } from "./OverlayProvider";
import { OverlayBasic } from "./OverlayBasic";
import { OpenOverlay } from "./OpenOverlay";
import { OverlayConfig } from "./OverlayConfig";

<Edit folder={props.folder} />

<Header
  title="Overlay"
  subtitle="Overlay Provider and UI component for modals and overlaying content."
  npm={props.npm}
  status="stable"
/>

An <a href="https://github.com/paritytech/polkadot-cloud/blob/main/packages/cloud-react/lib/overlay/OverlayProvider/index.tsx" target="_blank" rel="noreferrer">`OverlayProvider`</a> context and <a href="https://github.com/paritytech/polkadot-cloud/blob/main/packages/cloud-react/lib/overlay/Overlay/index.tsx" target="_blank" rel="noreferrer">`Overlay`</a> UI component are provided for apps to use to manage the state of modals and overlaying content out of the box.

<Note>
  `OverlayProvider` is a headless component. Apps can host thier own desired UI for modals and overlaying content, and use the provided `useOverlay` hook to make the UI functional. This will be explained in more detail further down.
</Note>

<Note>
  <a href="https://staking.polkadot.network" target="_blank" rel="noreferrer">Polkadot Staking Dashboard</a> has integrated modals using the components in this doc. Perform actions like opening your account list, or opening the wallet connection options, to observe the modal behavior.
</Note>

## Basic Integration: Modals

Integrating modal functionality in your app is as simple as wrapping your app with the `OverlayProvider` component, and injecting your provided modal UI into the `Overlay` component.

### 1. Wrap your app with OverlayProvider

Import and add the `OverlayProvider` component to the root of your app, or above any components that require the overlay API. 

<OverlayProvider />

### 2. Nest the Overlay component and provide modals

Import and nest `Overlay` inside `OverlayProvider`. Use the `modals` prop to import an array of components you wish to be opened as a modal.

The following example provides 2 modals to the `Overlay` component, as well as a fallback modal, that is rendered when an error occurs. 

<OverlayBasic />

<Note>
The fallback modal is just implementing <a href="https://www.npmjs.com/package/react-error-boundary" target="_blank" rel="noreferrer">React Error Boundary</a> to catch any errors that occur in the modals.
</Note>

### 3. Open modals with the useOverlay hook

Import the `useOverlay` hook and use it to open and close modals. The modal component name itself acts as the key of the modal to open.

The following JSX shows how modals can be opened:

<OpenOverlay />

The modal size can be set using the `size` property, and custom data can be persisted to the overlay with the `options` property, and accessed later in the active modal

Note that `options` prop allows you to send custom data to the modal component. Access this data using `useOverlay`:

<OverlayConfig />